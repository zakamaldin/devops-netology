# Домашнее задание к занятию "Работа в терминале. Лекция 1"

1. С помощью базового файла конфигурации запустите Ubuntu 20.04 в VirtualBox посредством Vagrant

    ### Ответ:

    Пришлось повозиться так как Hashicorp заблокировал возможность скачивания дистрибутивов:
        
    * Необходимо скачать образ ВМ из клауда вручную - https://app.vagrantup.com/bento/boxes/ubuntu-20.04
    * заменить параметр `config.vm.box` в vagranfile на `"file://C:\\Users\\Admin\\Downloads\\e3801813-59e0-4e69-8ace-78362d9f47cf"`

            ```bash
                Vagrant.configure("2") do |config|
                    config.vm.box = "file://C:\\Users\\Admin\\Downloads\\e3801813-59e0-4e69-8ace-78362d9f47cf"
                end
            ```

2. Ознакомьтесь с графическим интерфейсом VirtualBox, посмотрите как выглядит виртуальная машина, которую создал для вас Vagrant, какие аппаратные ресурсы ей выделены. Какие ресурсы выделены по-умолчанию?

    ### Ответ:
    ![1_2](/images/1_2.png)


3. Ознакомьтесь с возможностями конфигурации VirtualBox через Vagrantfile: [документация](https://www.vagrantup.com/docs/providers/virtualbox/configuration.html). Как добавить оперативной памяти или ресурсов процессора виртуальной машине?
    
    ### Ответ:

    Необходимо изменить vagrantfile

    ```bash
        Vagrant.configure("2") do |config|
            config.vm.box = "file://C:\\Users\\Admin\\Downloads\\e3801813-59e0-4e69-8ace-78362d9f47cf"
            config.vm.provider "virtualbox" do |v|
                v.memory = 2024
                v.cpus = 2
            end
        end
    ```

    И выполнить команду `vagrant reload`

    ![1_3](/images/1_3.png)



4. Команда `vagrant ssh` из директории, в которой содержится Vagrantfile, позволит вам оказаться внутри виртуальной машины без каких-либо дополнительных настроек. Попрактикуйтесь в выполнении обсуждаемых команд в терминале Ubuntu.

    ### Ответ:
    ![1_4](/images/1_4.png)

5. Ознакомьтесь с разделами `man bash`, почитайте о настройках самого bash:
    * какой переменной можно задать длину журнала `history`, и на какой строчке manual это описывается?
        
        ### Ответ:
        На строке 3009 описано какими двумя переменными задается длина журнала:
            * HISTSIZE — длина журнала в памяти интерпретатора, строка 851
            * HISTFILESIZE — длина журнала в файле истории, строка 846
    * что делает директива `ignoreboth` в bash?

        ### Ответ: 
        Алиас для двух других директив:
            
        * `ignorespace` - команды, начинающиеся на пробел не будут сохранены в историю
        * `ignoredups` - одинаковые команды, идущие подряд не будут дублироватьс в истории, сохранится только 1 экземпляр

6. В каких сценариях использования применимы скобки `{}` и на какой строчке `man bash` это описано?
    ### Ответ:
    При использовании в среде текущего интерпретатора - строка 257
7. С учётом ответа на предыдущий вопрос, как создать однократным вызовом `touch` 100000 файлов? Получится ли аналогичным образом создать 300000? Если нет, то почему?
    ### Ответ:
    * 100000 файлов - `touch {1..100000}`
    * 300000 файлов - `touch {1..300000}`, но возникнет ошибка

        ```bash 
        -bash: /usr/bin/touch: Argument list too long
        ```
    Ошибка возникает из-за того что конструкция вида `touch {1..300000}` разворачивается в `touch 1 2 3 .. 300000`, что превышает максимально допустимы размер команды с аргументами, подробнее - [тут](https://unix.stackexchange.com/questions/451486/how-to-cause-argument-list-too-long-error#comment820001_451548)

8. В man bash поищите по `/\[\[`. Что делает конструкция `[[ -d /tmp ]]`?

    ### Ответ:
    в `man bash` на 269 строке сказано, что конструкция вида `[[ expression ]]` вернет 1 или 0 в зависимости от выражения

    а оператор `-d` - вернет `True` если файл существует и файль является директорией

    следовательно `[[ -d /tmp ]]` вернет `True`, так как директория `/tmp` - существует:

    ![1_8](/images/1_8.png)



9. Сделайте так, чтобы в выводе команды `type -a bash` первым стояла запись с нестандартным путем, например bash is ... 
Используйте знания о просмотре существующих и создании новых переменных окружения, обратите внимание на переменную окружения PATH 

    ### Ответ:
    ![1_9](/images/1_9.png)

10. Чем отличается планирование команд с помощью `batch` и `at`?

    ### Ответ:
    * at - запланированное однократное исполнение задачи
    * batch - исполнение задачи по триггеру - когда нагрузка процессора будет меньше 1.5%

